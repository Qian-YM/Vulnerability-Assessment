package main

import (
	"log"
	"vulAssess/collect"
	"vulAssess/target"
)

// TODO: 整理代码，统一错误处理
// TODO: 将配置写入config文件
func main() {
	// TODO: ssh弱口令检查
	err := target.GetArch(targets)
	if err != nil {
		log.Fatal(err)
		return
	}
	// TODO: make
	// TODO: 多线程改进
	// 边上传边激活，开启一个协程上传并激活，使用通道通信，循环完后接收通信，接收到就开始执行测试，通道接收靶机编号
	// 启动测试协程，其中测试协程一直阻塞直到测试结果返回
	err = target.UploadClient(targets)
	if err != nil {
		log.Fatal(err)
		return
	}
	target.ActiveClient(targets)
	go collect.GetServer(target.ClientTarget{
		Addr:      "http://125.220.147.45:12345",
		ProxyAddr: "http://127.0.0.1:8888",
	})
	// TODO: 使用yml记录poc
}
